<script>
    const LOCAL_STORAGE_KEY = 'todo-content';
    // 사이드 바 관련
    document.getElementById('toggle').addEventListener('click', (e) => {
      
      const sidebar = document.getElementById('sidebar');
      const toggle = document.getElementById('toggle');
      
      const content = document.getElementById('markdown-input').value;
      localStorage.setItem(LOCAL_STORAGE_KEY, content);

      const savedContent = localStorage.getItem(LOCAL_STORAGE_KEY) || '';
      document.getElementById('markdown-input').value = savedContent;
      document.getElementById('rendered-content').innerHTML = marked.parse(savedContent);

      sidebar.classList.toggle('active');

      if (sidebar.classList.contains('active')) toggle.style.left = '320px';
      else toggle.style.left = '20px';
    });

    window.addEventListener('DOMContentLoaded', () => {
      const savedContent = localStorage.getItem(LOCAL_STORAGE_KEY);
      if (savedContent) {
        document.getElementById('markdown-input').value = savedContent;
        document.getElementById('rendered-content').innerHTML = marked.parse(savedContent);
      }
    });

    // 키보드 입력시 마크다운 파싱 관련
    document.getElementById('markdown-input').addEventListener('input', () => {
      const input = document.getElementById('markdown-input').value;
      document.getElementById('rendered-content').innerHTML = marked.parse(input);
    });
  </script>
